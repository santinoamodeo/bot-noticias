<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bot de Noticias</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', sans-serif; background: #0f0f1a; color: #fff; min-height: 100vh; }
    .header { background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 40px 20px; text-align: center; border-bottom: 1px solid #ffffff15; }
    .header h1 { font-size: 2.5rem; background: linear-gradient(90deg, #00d4ff, #7b2ff7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .header p { color: #888; margin-top: 8px; }
    .search-box { display: flex; gap: 10px; justify-content: center; margin-top: 24px; flex-wrap: wrap; }
    .search-box input { padding: 14px 20px; border-radius: 30px; border: 1px solid #ffffff20; background: #ffffff10; color: #fff; font-size: 1rem; width: 320px; outline: none; transition: border 0.3s; }
    .search-box input:focus { border-color: #00d4ff; }
    .search-box button { padding: 14px 28px; border-radius: 30px; border: none; background: linear-gradient(135deg, #00d4ff, #7b2ff7); color: #fff; font-size: 1rem; cursor: pointer; transition: opacity 0.3s; }
    .search-box button:hover { opacity: 0.85; }
    .container { max-width: 800px; margin: 40px auto; padding: 0 20px; }
    .card { background: #1a1a2e; border: 1px solid #ffffff10; border-radius: 16px; padding: 24px; margin-bottom: 20px; transition: transform 0.2s, border-color 0.2s; }
    .card:hover { transform: translateY(-3px); border-color: #00d4ff40; }
    .card h2 { font-size: 1.1rem; color: #fff; margin-bottom: 10px; line-height: 1.4; }
    .card p { color: #aaa; font-size: 0.9rem; line-height: 1.6; margin-bottom: 14px; }
    .card-footer { display: flex; justify-content: space-between; align-items: center; }
    .fuente { background: #ffffff10; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; color: #888; }
    .leer-mas { color: #00d4ff; text-decoration: none; font-size: 0.85rem; }
    .leer-mas:hover { text-decoration: underline; }
    .loading { text-align: center; padding: 60px; color: #888; display: none; }
    .spinner { width: 40px; height: 40px; border: 3px solid #ffffff10; border-top-color: #00d4ff; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 16px; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .empty { text-align: center; padding: 60px; color: #555; }
  </style>
</head>
<body>

<div class="header">
  <h1>ðŸ“° Bot de Noticias</h1>
  <p>BuscÃ¡ noticias sobre cualquier tema al instante</p>
  <div class="search-box">
    <input type="text" id="input-tema" placeholder="Ej: inteligencia artificial, clima, fÃºtbol..." />
    <button onclick="buscarNoticias()">Buscar</button>
  </div>
</div>

<div class="container">
  <div class="loading" id="loading">
    <div class="spinner"></div>
    <p>Buscando noticias...</p>
  </div>
  <div id="resultados"></div>
</div>

<script>
  document.getElementById("input-tema").addEventListener("keypress", function(e) {
    if (e.key === "Enter") buscarNoticias();
  });

  async function buscarNoticias() {
    const tema = document.getElementById("input-tema").value.trim();
    if (!tema) return;

    const loading = document.getElementById("loading");
    const resultados = document.getElementById("resultados");

    loading.style.display = "block";
    resultados.innerHTML = "";

    try {
      const res = await fetch(`https://bot-noticias-func.azurewebsites.net/api/obtener-noticias?tema=${encodeURIComponent(tema)}`);
      const noticias = await res.json();

      loading.style.display = "none";

      if (noticias.length === 0) {
        resultados.innerHTML = '<div class="empty">No se encontraron noticias para ese tema.</div>';
        return;
      }

      noticias.forEach(n => {
        resultados.innerHTML += `
          <div class="card">
            <h2>${n.titulo}</h2>
            <p>${n.descripcion || "Sin descripciÃ³n disponible."}</p>
            <div class="card-footer">
              <span class="fuente">${n.fuente}</span>
              <a class="leer-mas" href="${n.url}" target="_blank">Leer mÃ¡s â†’</a>
            </div>
          </div>`;
      });
    } catch (err) {
      loading.style.display = "none";
      resultados.innerHTML = '<div class="empty">Error al conectar con el servidor.</div>';
    }
  }
</script>

</body>
</html>
